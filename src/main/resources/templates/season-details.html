<!DOCTYPE html>
<html lang="en">
	<head>
	    <script th:replace="/shared/head"></script>
	    
	    <link rel="stylesheet" th:href="@{/css/styles-season-details.css}">
	    
	    <script th:inline="javascript">
			const currentSeason = /*[[${season.year}]]*/ 'default value';
			const currentCategory = /*[[${#strings.toUpperCase(category.abbr)}]]*/ 'default value';
	    </script>
	    <script th:src="@{/js/season-details.js}"></script>
	</head>
	<body>
		<!-- Header -->
		<section th:insert="/shared/header :: header"></section>
		
		<section id="season-details" th:style="|--background-color: ${category.principalColor}; --background-color-hover: ${category.secondaryColor}; --text-color: ${category.textColor};|">
			<div class="splide" role="group" aria-label="Splide Basic HTML Example">
				<div class="splide__track">
					<ul class="splide__list">
						<!-- Teams & Drivers -->
						<li class="splide__slide">
							<div class="splide-content">
								<h1 class="title">TEAMS & DRIVERS <span class="category" th:text="${#strings.toUpperCase(category.name)}" th:data-abbr="${category.abbr}"></span> <span class="season" th:text="${season.year}"></span></h1>
								
								<div class="teams-and-drivers">
									<div class="team" th:style="|--team-bgcolor: ${constructor.value.principalColor}; --team-color: ${constructor.value.secondaryColor}|" th:each="constructor, status: ${season.constructors.entrySet()}" th:data-id="${constructor.value.id}">
										<div class="brand text-center">
											<h4 th:text="${constructor.value.name}"></h4>
											<img th:src="@{'../../img/teams/'+${constructor.value.id}+'.png'}" class="logo">
											<img th:src="@{'../../img/teams/cars/'+${season.year}+'/'+${category.abbr}+'/'+${constructor.value.id}+'.png'}" class="car admin-features" onerror="loadDefaultCarImage(this)" th:data-teamId="${constructor.value.id}">
											<div class="admin-features">
												<i class="fa fa-info-circle car-image-info" aria-hidden="true" data-toggle="tooltip" title="Click on the car to add an image"></i>
											</div>
										</div>
										<div class="drivers">
											<div class="driver" th:each="driver, status: ${constructor.value.drivers.entrySet()}" th:data-id="${driver.value.id}" th:classappend="${driver.value.driverReplaced == 1} ? 'replaced' : ''">
												<div th:insert="/shared/driver-card :: driver-card(colour=${constructor.value.principalColor}, season=${season.year}, category=${category.abbr}, id=${driver.value.id}, number=${driver.value.number}, abbr=${#strings.substring(driver.value.lastName, 0, 3).toUpperCase()}, country=${driver.value.country}, firstName=${driver.value.firstName}, lastName=${driver.value.lastName}, team=${constructor.value})"></div>
											</div>
											<div class="admin-features">
												<i class="fa fa-plus-circle add-driver" aria-hidden="true" data-toggle="tooltip" title="Add driver"></i>
												<i class="fa fa-info-circle driver-image-info" aria-hidden="true" data-toggle="tooltip" title="Click on the driver card to add an image"></i>
											</div>
										</div>
									</div>
									
									<div class="admin-features text-center">
										<i class="fa fa-plus-circle add-team" aria-hidden="true" data-toggle="tooltip" title="Add team"></i>
									</div>
								</div>
							</div>
						</li>
						
						<li class="splide__slide">
							<div class="splide-content">
								<h1 class="title">CALENDAR & RESULTS <span class="category">FORMULA 2</span> <span class="season">2023</span></h1>
							</div>
						</li>
						<li class="splide__slide">
							<div class="splide-content">
								<h1 class="title">STANDINGS <span class="category">FORMULA 2</span> <span class="season">2023</span></h1>
							</div>
						</li>
					</ul>
				</div>
			</div>
			
			<!-- Modal team image -->
			<div id="modalTeamImage" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalTeamImage" aria-hidden="true">
	  			<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    			<div class="modal-content">
	      				<div class="modal-header">
	        				<h5 class="modal-title">Update car image</h5>
	      				</div>
	      				<div class="modal-body">
	      					<form id="updateCarImage">
		        				<img class="car">
		        				<i class="fa fa-arrow-right" aria-hidden="true"></i>
		        				<label for="car-image-upload">
		        					<img th:src="@{'/img/teams/cars/f1.default.png'}" class="car new">
								</label>
		        				<input id="car-image-upload" type="file" style="display: none;">
	      					</form>
	      				</div>
	      				<div class="modal-footer">
	        				<button type="button" class="btn btn-success save-changes">Save changes</button>
	        				<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
	      				</div>
	    			</div>
	  			</div>
			</div>
			
			<!-- Modal driver image -->
			<div id="modalDriverImage" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalDriverImage" aria-hidden="true">
	  			<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    			<div class="modal-content">
	      				<div class="modal-header">
	        				<h5 class="modal-title">Update car image</h5>
	      				</div>
	      				<div class="modal-body">
	      					<form id="updateDriverImage">
		        				<img class="driver">
		        				<i class="fa fa-arrow-right" aria-hidden="true"></i>
		        				<label for="driver-image-upload">
		        					<img th:src="@{'/img/drivers/default.png'}" class="driver new">
								</label>
		        				<input id="driver-image-upload" type="file" style="display: none;">
	      					</form>
	      				</div>
	      				<div class="modal-footer">
	        				<button type="button" class="btn btn-success save-changes">Save changes</button>
	        				<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
	      				</div>
	    			</div>
	  			</div>
			</div>
			
			<!-- Modal add driver -->
			<div id="modalAddDriver" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalAddDriver" aria-hidden="true">
	  			<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    			<div class="modal-content">
	      				<div class="modal-header">
	        				<h5 class="modal-title">Add <span class="driver-name">driver</span> to <span class="team-name"></span></h5>
	      				</div>
	      				<div class="modal-body">
	      					<div class="filters">
								<form id="addDriverFilters">
									<div class="filter-types">
										<input name="lastname" type="text" placeholder="Insert lastname">
										<div th:insert="/shared/countries-selection-menu :: countries-selection-menu"></div>
									</div>
									<div class="actions">
										<button class="cancel-button btn btn-secondary">X</button>
										<button class="search-button btn btn-warning">Search</button>								
									</div>
								</form>
	      					</div>
	      					<div class="drivers-list"></div>
	      					<div class="selected-driver justify-content-around align-items-center">
								<div class="selected-driver-card"></div>
								<div class="form text-center">
									<label for="number">Car number</label>
									<input type="number" name="number" class="form-control">
									
									<label for="seat">Team seat</label>
									<input type="number" name="seat" class="form-control">
									
									<label for="driverReplaced">Driver replaced</label>
									<select name="driverReplaced" class="form-control">
										<option selected value="0">No one</option>
									</select>
								</div>	  
							</div>
	      					<div class="pagination"></div>
	      				</div>
	      				<div class="modal-footer">
	        				<button type="button" class="btn btn-success add-button" data-step="1">Select</button>
	        				<button type="button" class="btn btn-danger goback-button">Go back</button>
	        				<button type="button" class="btn btn-danger close-button" data-bs-dismiss="modal">Close</button>
	      				</div>
	    			</div>
	  			</div>
			</div>
		
			<!-- Modal add team -->
			<div id="modalAddTeam" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modalAddTeam" aria-hidden="true">
	  			<div class="modal-dialog modal-dialog-centered modal-lg" role="document">
	    			<div class="modal-content">
	      				<div class="modal-header">
	        				<h5 class="modal-title">Add <span>team</span> to 2023 season</h5>
	      				</div>
	      				<div class="modal-body">
	      					<div class="filters">
								<form id="addTeamFilters">
									<div class="filter-types">
										<input name="name" type="text" placeholder="Insert name">
										<div th:insert="/shared/countries-selection-menu :: countries-selection-menu"></div>
									</div>
									<div class="actions">
										<button class="cancel-button btn btn-secondary">X</button>
										<button class="search-button btn btn-warning">Search</button>								
									</div>
								</form>
	      					</div>
	      					<div class="teams-list"></div>
	      					<div class="team-colors text-center">
								  <label for="color1">Principal color</label>
								  <input type="color" name="color1" class="form-control">
								  <label for=""color2>Secondary color</label>
								  <input type="color" name="color2" class="form-control">
							  </div>
	      					<div class="pagination justify-content-center"></div>
	      				</div>
	      				<div class="modal-footer">
	        				<button type="button" class="btn btn-success add-button" data-step="1">Select</button>
	        				<button type="button" class="btn btn-danger goback-button">Go back</button>
	        				<button type="button" class="btn btn-danger close-button" data-bs-dismiss="modal">Close</button>
	      				</div>
	    			</div>
	  			</div>
			</div>
		</section>
		
		<!-- Footer -->
		<section th:insert="/shared/footer :: footer"></section>
	</body>
</html>